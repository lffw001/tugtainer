<p-toolbar>
  <ng-template #start>
    <p-iconfield iconPosition="left">
      <p-inputicon>
        <i class="pi pi-search"></i>
      </p-inputicon>
      <input
        #searchInput
        id="host-search"
        pInputText
        type="text"
        (input)="dt2.filterGlobal($event.target.value, 'contains')"
        [placeholder]="'HOSTS.TABLE.SEARCH_PLACEHOLDER' | translate"
      />
      <p-button
        icon="pi pi-refresh"
        text
        [loading]="list.isLoading()"
        (onClick)="list.reload()"
      ></p-button>
    </p-iconfield>
  </ng-template>
  <ng-template #end>
    <p-button
      icon="pi pi-plus"
      severity="success"
      routerLink="/hosts/new"
      [label]="'HOSTS.TABLE.ADD' | translate"
    ></p-button>
  </ng-template>
</p-toolbar>

<p-table
  #dt2
  [globalFilterFields]="['id', 'name', 'url']"
  dataKey="id"
  sortField="id"
  [scrollable]="true"
  scrollHeight="flex"
  [value]="list.value()"
  selectionMode="single"
>
  <ng-template #header>
    <tr>
      <th pSortableColumn="name">
        {{ 'HOSTS.TABLE.NAME' | translate }}
        <p-sortIcon field="name"></p-sortIcon>
      </th>
      <th pSortableColumn="url">
        {{ 'HOSTS.TABLE.URL' | translate }}
        <p-sortIcon field="url"></p-sortIcon>
      </th>
      <th
        pSortableColumn="status"
        style="width: 20%"
      >
        {{ 'HOSTS.TABLE.STATUS' | translate }}
        <p-sortIcon field="status"></p-sortIcon>
      </th>
    </tr>
  </ng-template>

  <ng-template
    #body
    let-host
  >
    <tr
      [routerLink]="'/hosts/' + host.id"
      style="cursor: pointer"
    >
      <td>
        {{ host.name }}
        @if (!host.enabled) {
          <p-tag severity="danger">
            {{ 'GENERAL.DISABLED' | translate }}
          </p-tag>
        }
      </td>
      <td>
        {{ host.url }}
      </td>
      <td>
        <app-host-status [host]="host"></app-host-status>
      </td>
    </tr>
  </ng-template>
</p-table>
