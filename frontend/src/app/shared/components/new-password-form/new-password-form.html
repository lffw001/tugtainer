<form class="form" [formGroup]="form" (submit)="onSubmit()">
  <!-- Chrome hack -->
  <input
    type="text"
    id="login_username"
    name="login_username"
    autocomplete="username"
    style="display: none"
  />

  <p-iftaLabel class="form-field">
    <p-password
      inputId="new-password"
      name="new-password"
      autocomplete="new-password"
      formControlName="password"
      [toggleMask]="true"
      [feedback]="true"
      [fluid]="true"
      [promptLabel]="'AUTH.PASSWORD_PROMPT' | translate"
      [weakLabel]="'AUTH.PASSWORD_STRENGTH.WEAK' | translate"
      [mediumLabel]="'AUTH.PASSWORD_STRENGTH.MEDIUM' | translate"
      [strongLabel]="'AUTH.PASSWORD_STRENGTH.STRONG' | translate"
    >
      <ng-template #footer>
        <p-divider />
        <ul class="pl-2 my-0 leading-normal">
          @for (text of 'AUTH.PASSWORD_HINTS' | translate; track text) {
            <li>{{ text }}</li>
          }
        </ul>
      </ng-template>
    </p-password>
    <label for="new-password">
      {{ 'AUTH.PASSWORD' | translate }}
    </label>
  </p-iftaLabel>

  <p-iftaLabel class="form-field">
    <p-password
      [class.ng-invalid]="confirmPasswordError()"
      inputId="confirm-new-password"
      name="confirm-new-password"
      autocomplete="new-password"
      formControlName="confirm_password"
      [toggleMask]="true"
      [feedback]="true"
      [fluid]="true"
      [promptLabel]="'AUTH.PASSWORD_PROMPT' | translate"
      [weakLabel]="'AUTH.PASSWORD_STRENGTH.WEAK' | translate"
      [mediumLabel]="'AUTH.PASSWORD_STRENGTH.MEDIUM' | translate"
      [strongLabel]="'AUTH.PASSWORD_STRENGTH.STRONG' | translate"
    >
      <ng-template #footer>
        <p-divider />
        <ul class="pl-2 my-0 leading-normal">
          @for (text of 'AUTH.PASSWORD_HINTS' | translate; track text) {
            <li>{{ text }}</li>
          }
        </ul>
      </ng-template>
    </p-password>
    <label for="confirm-new-password">
      {{ 'AUTH.CONFIRM_PASSWORD' | translate }}
    </label>
  </p-iftaLabel>

  <p-button
    [fluid]="fluidButton()"
    class="form-button"
    type="submit"
    [loading]="isLoading()"
    [disabled]="!form.dirty"
  >
    <i class="pi pi-save"></i>
    <span pButtonLabel>
      {{ 'GENERAL.SAVE' | translate }}
    </span>
  </p-button>
</form>
